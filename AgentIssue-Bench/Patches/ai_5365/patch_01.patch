diff --git a/examples/next-fastapi/api/index.py b/examples/next-fastapi/api/index.py
index a2ed7fb..1578472 100644
--- a/examples/next-fastapi/api/index.py
+++ b/examples/next-fastapi/api/index.py
@@ -14,21 +14,23 @@ load_dotenv(".env.local")
 
 app = FastAPI()
 
-client = OpenAI(
-    api_key=os.environ.get("OPENAI_API_KEY"),
-)
-
-
 class Request(BaseModel):
     messages: List[ClientMessage]
 
 
+def get_openai_client():
+    return OpenAI(
+        api_key=os.environ.get("OPENAI_API_KEY"),
+    )
+
+
 available_tools = {
     "get_current_weather": get_current_weather,
 }
 
 
 def stream_text(messages: List[ClientMessage], protocol: str = 'data'):
+    client = get_openai_client()
     stream = client.chat.completions.create(
         messages=messages,
         model="gpt-4o",
@@ -132,4 +134,4 @@ async def handle_chat_data(request: Request, protocol: str = Query('data')):
 
     response = StreamingResponse(stream_text(openai_messages, protocol))
     response.headers['x-vercel-ai-data-stream'] = 'v1'
-    return response
+    return response